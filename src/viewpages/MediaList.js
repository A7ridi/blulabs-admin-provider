import React from "react";
//import LoadingIndicator from '../common/LoadingIndicator';
import LoadingContent from "../common/LoadingContent";
import BaseComponent from "../components/BaseComponent";
import * as i18n from "../I18n/en.json";
import Apimanager from "../Apimanager/index";
import moment from "moment";
//import { PDF } from '../common/contentIcon'

class MediaList extends BaseComponent {
  constructor(props) {
    super(props);
    this.state = {
      isloading: true,
      contentList: [],
      selectContentID: null,
      chapterType: "",
      MRNNumber: "",
      encounterID: ""
    };
  }

  componentDidUpdate() {
    if (this.props.callCareAPI) {
      this.getChapterByVisitId();
      this.props.stopCallingAPI()
    }

  }

  componentDidMount() {
    if (this.props && this.props.match) {
      this.getChapterByVisitId();
    }
  }

  getChapterByVisitId = () => {
    this.setState({
      chapterType: this.props.location.state.shearedparams.type
    })

    let requestparams = {
      visitId: this.props.match.params.visitid,
      chapterType: this.props.location.state.shearedparams.type,
    };

    Apimanager.getChapterByVisitId(
      requestparams,
      (success) => {
        if (
          success &&
          success.data &&
          success.data.data &&
          success.data.data[0]
        ) {
          let items = success.data.data[0].items;
          let list = [];
          if (items.length > 0) {
            items.map((item) => {
              if (item.isActive) {
                list.push(item);
              }
              return null;
            });
          }

          let media = success.data.data[0].media;
          if (media.length > 0) {
            media.map((item) => {
              list.push(item);
              return null;
            });
          }

          if (list.length > 0) {
            list.sort((a, b) => {
              return b.lastUpdate - a.lastUpdate;
            });
          }
          this.setState({
            contentList: list,
            isloading: false,
          });
        } else {
          this.setState({
            isloading: false,
          });
        }
      },
      (error) => {
        this.setState({
          isloading: false,
        });

        if (error && error.status === 500) {
          //this.notify((error && error.message) || (error && error.data && error.data.settings && error.data.settings.message))
          return;
        }
      }
    );
  }

  showDescription = (object) => {
    this.setState({
      selectContentID: object.id,
    });
    this.props.showContentDescriptions(object);
    this.props.hideMediaText(object);
  };

  renderChappters() {
    const { isloading, contentList } = this.state;

    return contentList && Array.isArray(contentList) && contentList.length > 0
      ? contentList.map((item, index) => {
        let style = {};
        if (this.props.location.state.shearedparams.type === "DOC") {
          style = { color: "red" };
        }
        let mediaIcon = (
          <svg
            width="28px"
            height="28px"
            viewBox="0 0 28 28"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            xlink="http://www.w3.org/1999/xlink"
          >
            <title>attach</title>
            <g
              id="Page-1"
              stroke="none"
              stroke-width="1"
              fill="none"
              fillRule="evenodd"
            >
              <g
                id="Artboard"
                transform="translate(-494.000000, -204.000000)"
                fill="#0063E8"
                fillRule="nonzero"
              >
                <g id="attach" transform="translate(494.000000, 204.000000)">
                  <path
                    d="M25.375,0 L2.625,0 C1.17523437,0 0,1.17523437 0,2.625 L0,25.375 C0,26.8247656 1.17523437,28 2.625,28 L25.375,28 C26.8247656,28 28,26.8247656 28,25.375 L28,2.625 C28,1.17523437 26.8247656,0 25.375,0 Z M26.25,25.375 C26.25,25.8582734 25.8582734,26.25 25.375,26.25 L2.625,26.25 C2.14172656,26.25 1.75,25.8582734 1.75,25.375 L1.75,2.625 C1.75,2.14172656 2.14172656,1.75 2.625,1.75 L25.375,1.75 C25.8582734,1.75 26.25,2.14172656 26.25,2.625 L26.25,25.375 Z"
                    id="Shape"
                  ></path>
                  <path
                    d="M15.3076077,8.29679438 L15.4181129,8.2045339 L15.5492008,8.11177226 C15.6820846,8.02274612 15.8225506,7.94104325 15.9682,7.86821404 L16.1089925,7.8018342 L16.253939,7.74776189 C16.4140945,7.69258825 16.5798149,7.64724095 16.74809,7.61268618 L16.9161265,7.58284237 L17.0680395,7.56932279 C17.2406623,7.55809406 17.4155239,7.55809406 17.5895822,7.56947039 L17.7451866,7.58368988 L17.9085339,7.61305734 C18.0748727,7.64724095 18.2405931,7.69258825 18.4026374,7.74844131 L18.5463527,7.80310649 L18.6881899,7.86916029 C18.8309322,7.94071303 18.9710653,8.02235461 19.1065237,8.11302939 L19.2406081,8.20817309 L19.3503682,8.29957276 C19.4742667,8.40865621 19.5924097,8.52676029 19.7029348,8.65226139 L19.79897,8.76859286 L19.8893765,8.89539783 C19.9784445,9.02825546 20.0601736,9.16867381 20.133026,9.31427376 L20.1988756,9.45736993 L20.2537326,9.60048482 C20.3087062,9.76001264 20.3540677,9.92567573 20.3886333,10.0938926 L20.4160473,10.2564901 L20.432093,10.41459 C20.4432419,10.5862898 20.4432419,10.7610905 20.431862,10.9350883 L20.4154003,11.0932619 L20.3881348,11.2546598 C20.3540677,11.4202065 20.3087062,11.5858696 20.2528356,11.7478581 L20.1980133,11.8900396 L20.1319378,12.0336169 L20.0172613,12.245175 C19.9765771,12.3149214 19.9334842,12.3837959 19.8881323,12.4515023 L19.8628029,12.500081 C19.7625267,12.6307551 19.6519155,12.7563462 19.5316929,12.8765292 C19.2201958,13.1900271 19.212315,13.738881 19.5339844,14.0343175 C19.8669598,14.3399678 20.3735562,14.3480458 20.6877634,14.0319542 C21.6995451,13.0128577 22.2174744,11.5500085 22.0407718,10.1554472 C21.9427605,9.38361279 21.7096431,8.69578984 21.326236,8.10654041 C20.9164358,7.4758465 20.369441,6.94783764 19.7339435,6.5752346 C18.5188533,5.86317496 16.9753753,5.72285776 15.6812251,6.21943866 C15.0194491,6.47284247 14.4448317,6.83616003 13.9653384,7.31365886 L7.58968764,13.6873316 C7.21268751,14.0657673 6.99272796,14.3091015 6.78288613,14.598919 C5.97171562,15.7185608 5.71751514,17.2494973 6.09807289,18.6144658 C6.29545707,19.3181137 6.65899106,19.9714912 7.15692832,20.5264798 C7.63225264,21.0574438 8.2477235,21.4685699 8.97283435,21.7605046 C10.2584943,22.2738556 11.7998582,22.1498608 13.0295345,21.4520629 C13.3882213,21.2483307 13.66595,21.0291566 14.0747466,20.637296 L14.5220177,20.1956694 L18.0685238,16.6503315 C18.5909462,16.1242418 18.8882837,15.4007721 18.8788118,14.6678941 C18.8690406,13.8571462 18.4985956,13.0615018 17.8858672,12.5759624 C17.5208717,12.2882319 17.1541429,12.0979137 16.7611451,12.0108072 C16.333111,11.9157198 15.9046369,11.9157198 15.4784012,12.0108303 C14.9829292,12.1208989 14.5149008,12.3936617 14.1283286,12.7820986 L10.2462277,16.6629204 C9.93533708,16.9737086 9.92807764,17.5265637 10.2485345,17.8207228 C10.5886579,18.1208755 11.0902905,18.1264131 11.4056732,17.8131172 L14.9041204,14.3158229 L15.0993602,14.1160388 C15.1814232,14.0315828 15.238134,13.9746259 15.2962643,13.9191105 L15.4368655,13.7940217 L15.4813906,13.7642688 C15.5246427,13.7363965 15.5703501,13.7094574 15.6167172,13.6846752 L15.6875927,13.6505479 L15.7452839,13.6300474 C15.7975535,13.613296 15.8528297,13.5981038 15.9084402,13.5854064 L15.9818127,13.5717171 L16.0456219,13.5674407 C16.0973373,13.5654007 16.1515876,13.5654007 16.2058403,13.567586 L16.2808078,13.5728201 L16.3428289,13.5854903 C16.396827,13.5976593 16.45201,13.6126772 16.5062463,13.630114 L16.5576899,13.6486003 L16.6346112,13.6867289 C16.6791374,13.7105822 16.7248985,13.737404 16.7694425,13.765945 L16.8291652,13.8075645 L16.8696177,13.8422884 L16.9765905,13.9494963 L17.018967,13.999033 L17.0529416,14.0497456 C17.0804548,14.0924509 17.1074023,14.1381424 17.1321922,14.1844933 L17.1651055,14.2548644 L17.1871784,14.3139384 L17.2314886,14.4761064 L17.2440931,14.5497581 L17.2495442,14.6142822 L17.2493132,14.7733896 L17.2442393,14.8378098 L17.2311328,14.9117911 C17.2192321,14.9642988 17.2042097,15.0194617 17.1867678,15.0736783 L17.1671113,15.1237865 L17.1296373,15.2030354 L17.0922133,15.2695083 L17.0164542,15.3861385 L16.9134298,15.5036211 L16.5487951,15.8658629 L13.08207,19.3328071 C12.9209943,19.494949 12.8147062,19.5979179 12.7015579,19.6987085 L12.5851057,19.795284 L12.4501924,19.8904368 C12.3155263,19.9789884 12.1746436,20.0603453 12.0301781,20.1326675 L11.88,20.201 L11.744736,20.2533314 C11.5853295,20.3082196 11.4196092,20.3535669 11.2513341,20.3881217 L11.083245,20.4170926 L10.9309877,20.4315222 C10.7587618,20.4427138 10.5839002,20.4427138 10.4098419,20.4313375 L10.2552191,20.4163482 L10.090507,20.3876833 C9.92455137,20.3535669 9.75883103,20.3082196 9.59678672,20.2523665 L9.45788398,20.1989839 L9.43,20.194 L9.31105969,20.1315668 C9.16849186,20.0600948 9.02835876,19.9784532 8.89290039,19.8877785 L8.76371689,19.7950588 L8.64858947,19.700851 C8.52515741,19.5921516 8.40701441,19.4740476 8.29648927,19.3485464 L8.19693728,19.2273736 L8.10869496,19.1050195 C8.01953211,18.972753 7.9376223,18.832415 7.86456171,18.6865131 L7.79496561,18.5372876 L7.74405595,18.4009006 C7.68886305,18.2407952 7.64350154,18.0751321 7.60893595,17.9069152 L7.57989793,17.73919 L7.56552604,17.586721 C7.55432735,17.414518 7.55432735,17.2397173 7.56570722,17.0657196 L7.57970109,16.9096893 L7.60928455,16.7470093 C7.64350154,16.5806013 7.68886305,16.4149382 7.74473366,16.2529498 L7.79726808,16.1122183 L7.86536091,15.9677736 C7.93706533,15.8248038 8.01873304,15.6847182 8.10943694,15.5493056 L8.2,15.422 L8.197,15.421 L8.2804218,15.3229455 C8.35737511,15.2341096 8.44287963,15.1426591 8.54825394,15.0355694 L9.03330519,14.5570362 L15.1227911,8.46955581 L15.3076077,8.29679438 Z"
                    id="Path"
                  ></path>
                </g>
              </g>
            </g>
          </svg>
        );
        if (item.type === undefined || item.type === "text") {
          mediaIcon = (
            <svg
              width="29px"
              height="26px"
              viewBox="0 0 29 26"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xlink="http://www.w3.org/1999/xlink"
            >
              <title>text</title>
              <g
                id="Page-1"
                stroke="none"
                strokeWidth="1"
                fill="none"
                fillRule="evenodd"
              >
                <g
                  id="Artboard"
                  transform="translate(-356.000000, -205.000000)"
                  fill="#0063E8"
                  fillRule="nonzero"
                >
                  <g id="text" transform="translate(356.000000, 205.000000)">
                    <path
                      d="M14.4355552,12.9625394 C13.9476924,12.9625394 13.5517457,12.5665927 13.5517457,12.0787299 L13.5517457,11.1949204 L5.30285702,11.1949204 L5.30285702,12.0787299 C5.30285702,12.5665927 4.90691037,12.9625394 4.41904752,12.9625394 C3.93118467,12.9625394 3.53523802,12.5665927 3.53523802,12.0787299 L3.53523802,10.3111109 C3.53523802,9.82324803 3.93118467,9.42730138 4.41904752,9.42730138 L14.4355552,9.42730138 C14.9234181,9.42730138 15.3193647,9.82324803 15.3193647,10.3111109 L15.3193647,12.0787299 C15.3193647,12.5665927 14.9234181,12.9625394 14.4355552,12.9625394 Z"
                      id="Path"
                    ></path>
                    <path
                      d="M9.42730138,20.9168249 C8.93943853,20.9168249 8.54349187,20.5208783 8.54349187,20.0330154 L8.54349187,10.605714 C8.54349187,10.1178512 8.93943853,9.72190454 9.42730138,9.72190454 C9.91516422,9.72190454 10.3111109,10.1178512 10.3111109,10.605714 L10.3111109,20.0330154 C10.3111109,20.5208783 9.91516422,20.9168249 9.42730138,20.9168249 Z"
                      id="Path"
                    ></path>
                    <path
                      d="M10.9003172,21.2114281 L7.95428554,21.2114281 C7.46642269,21.2114281 7.07047603,20.8154814 7.07047603,20.3276186 C7.07047603,19.8397557 7.46642269,19.4438091 7.95428554,19.4438091 L10.9003172,19.4438091 C11.3881801,19.4438091 11.7841267,19.8397557 11.7841267,20.3276186 C11.7841267,20.8154814 11.3881801,21.2114281 10.9003172,21.2114281 Z"
                      id="Path"
                    ></path>
                    <path
                      d="M23.8628566,11.1949204 L18.5599996,11.1949204 C18.0721367,11.1949204 17.6761901,10.7989737 17.6761901,10.3111109 C17.6761901,9.82324803 18.0721367,9.42730138 18.5599996,9.42730138 L23.8628566,9.42730138 C24.3507195,9.42730138 24.7466661,9.82324803 24.7466661,10.3111109 C24.7466661,10.7989737 24.3507195,11.1949204 23.8628566,11.1949204 Z"
                      id="Path"
                    ></path>
                    <path
                      d="M23.8628566,15.9085711 L18.5599996,15.9085711 C18.0721367,15.9085711 17.6761901,15.5126244 17.6761901,15.0247616 C17.6761901,14.5368987 18.0721367,14.1409521 18.5599996,14.1409521 L23.8628566,14.1409521 C24.3507195,14.1409521 24.7466661,14.5368987 24.7466661,15.0247616 C24.7466661,15.5126244 24.3507195,15.9085711 23.8628566,15.9085711 Z"
                      id="Path"
                    ></path>
                    <path
                      d="M23.8628566,20.6222218 L18.5599996,20.6222218 C18.0721367,20.6222218 17.6761901,20.2262751 17.6761901,19.7384123 C17.6761901,19.2505494 18.0721367,18.8546028 18.5599996,18.8546028 L23.8628566,18.8546028 C24.3507195,18.8546028 24.7466661,19.2505494 24.7466661,19.7384123 C24.7466661,20.2262751 24.3507195,20.6222218 23.8628566,20.6222218 Z"
                      id="Path"
                    ></path>
                    <path
                      d="M25.0412693,25.9250788 L3.24063485,25.9250788 C1.45298282,25.9250788 0,24.472096 0,22.6844439 L0,3.24063485 C0,1.45298282 1.45298282,0 3.24063485,0 L25.0412693,0 C26.8289213,0 28.2819041,1.45298282 28.2819041,3.24063485 L28.2819041,22.6844439 C28.2819041,24.472096 26.8289213,25.9250788 25.0412693,25.9250788 Z M3.24063485,1.76761901 C2.42870852,1.76761901 1.76761901,2.42870852 1.76761901,3.24063485 L1.76761901,22.6844439 C1.76761901,23.4963703 2.42870852,24.1574598 3.24063485,24.1574598 L25.0412693,24.1574598 C25.8531956,24.1574598 26.5142851,23.4963703 26.5142851,22.6844439 L26.5142851,3.24063485 C26.5142851,2.42870852 25.8531956,1.76761901 25.0412693,1.76761901 L3.24063485,1.76761901 Z"
                      id="Shape"
                    ></path>
                    <path
                      d="M27.3980946,5.89206336 L0.883809504,5.89206336 C0.395946658,5.89206336 0,5.4961167 0,5.00825386 C0,4.52039101 0.395946658,4.12444435 0.883809504,4.12444435 L27.3980946,4.12444435 C27.8859575,4.12444435 28.2819041,4.52039101 28.2819041,5.00825386 C28.2819041,5.4961167 27.8859575,5.89206336 27.3980946,5.89206336 Z"
                      id="Path"
                    ></path>
                  </g>
                </g>
              </g>
            </svg>
          );
        } else if (item.type.includes("video")) {
          mediaIcon = (
            <svg
              width="32px"
              height="32px"
              viewBox="0 0 32 32"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xlink="http://www.w3.org/1999/xlink"
            >
              <title>video</title>
              <g
                id="Page-1"
                stroke="none"
                strokeWidth="1"
                fill="none"
                fillRule="evenodd"
              >
                <g
                  id="Artboard"
                  transform="translate(-400.000000, -202.000000)"
                >
                  <g id="video" transform="translate(400.000000, 202.000000)">
                    <circle
                      id="Oval"
                      stroke="#0063E8"
                      strokeWidth="1.56342855"
                      cx="15.6342855"
                      cy="15.6342855"
                      r="14.8525712"
                    ></circle>
                    <path
                      d="M17.8043768,11.7237082 L23.152848,19.7464151 C23.4721548,20.2253753 23.3427302,20.8724985 22.86377,21.1918053 C22.6925563,21.3059478 22.4913871,21.3668569 22.2856139,21.3668569 L11.5886714,21.3668569 C11.0130329,21.3668569 10.5463857,20.9002097 10.5463857,20.3245712 C10.5463857,20.1187979 10.6072948,19.9176288 10.7214373,19.7464151 L16.0699085,11.7237082 C16.3892153,11.244748 17.0363385,11.1153234 17.5152987,11.4346302 C17.6297962,11.5109618 17.7280451,11.6092107 17.8043768,11.7237082 Z"
                      id="Triangle"
                      fill="#0063E8"
                      transform="translate(16.937143, 15.894857) rotate(90.000000) translate(-16.937143, -15.894857) "
                    ></path>
                  </g>
                </g>
              </g>
            </svg>
          );
        } else if (item.type.includes("audio")) {
          mediaIcon = (
            <svg
              width="32px"
              height="32px"
              viewBox="0 0 32 32"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xlink="http://www.w3.org/1999/xlink"
            >
              <title>audio</title>
              <g
                id="Page-1"
                stroke="none"
                strokeWidth="1"
                fill="none"
                fillRule="evenodd"
              >
                <g
                  id="Artboard"
                  transform="translate(-445.000000, -202.000000)"
                >
                  <g id="audio" transform="translate(445.000000, 202.000000)">
                    <circle
                      id="Oval"
                      stroke="#0063E8"
                      strokeWidth="1.56342855"
                      cx="15.6342855"
                      cy="15.6342855"
                      r="14.8525712"
                    ></circle>
                    <path
                      d="M21.0285714,13.0991011 L21.0285714,15.3948662 C21.0285714,17.9401711 18.9848739,20.0862125 16.2957983,20.4355681 L16.2957983,22.7812412 L18.0705882,22.7812412 C19.092437,22.7812412 19.092437,24.2285714 18.0705882,24.2285714 L13.0151261,24.1786635 C11.9932773,24.1287556 11.9932773,22.7313333 13.0151261,22.7313333 L14.7361345,22.7812412 L14.789916,20.4355681 C12.1008403,20.0862125 10.0571429,17.9401711 10.0571429,15.3948662 L10.0571429,13.0991011 C10.0571429,12.1508502 11.6168067,12.1508502 11.6168067,13.0991011 L11.6168067,15.3948662 C11.6168067,17.3911838 13.3915966,19.0381458 15.5428571,19.0381458 C17.6941176,19.0381458 19.4689076,17.3911838 19.4689076,15.3948662 L19.4689076,13.0991011 C19.4689076,12.1508502 21.0285714,12.1508502 21.0285714,13.0991011 Z M17.8554622,9.90499296 L17.8554622,15.3948662 C17.8554622,18.2396188 13.2302521,18.2396188 13.2302521,15.3948662 L13.2302521,9.90499296 C13.2302521,7.06024044 17.8554622,7.06024044 17.8554622,9.90499296 Z"
                      id="Combined-Shape"
                      fill="#0063E8"
                    ></path>
                  </g>
                </g>
              </g>
            </svg>
          );
        } else if (item.type.includes("pdf")) {
          mediaIcon = (
            <svg
              width="30px"
              height="30px"
              viewBox="0 0 30 30"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xlink="http://www.w3.org/1999/xlink"
            >
              <title>pdf</title>
              <g
                id="Page-1"
                stroke="none"
                strokeWidth="1"
                fill="none"
                fillRule="evenodd"
              >
                <g
                  id="Artboard"
                  transform="translate(-313.000000, -203.000000)"
                >
                  <g id="pdf" transform="translate(313.000000, 203.000000)">
                    <path
                      d="M20.0769239,0.69230772 L20.0769239,6.23076948 C20.0769239,7.76007723 21.316847,9.00000036 22.8461548,9.00000036 L28.7307704,9.00000036"
                      id="XMLID_173_"
                    ></path>
                    <path
                      d="M4.72153865,5.2148079 C4.64296172,5.17326944 4.55434633,5.18607713 4.45500018,5.17223097 C4.35565402,5.15873097 4.25319248,5.1923079 4.14692324,5.1923079 L3.4615386,5.1923079 L3.4615386,6.23076948 L4.12615401,6.23076948 C4.23692325,6.23076948 4.34319248,6.23976948 4.44461556,6.22142332 C4.54603864,6.20307717 4.63707711,6.17988486 4.71807711,6.1338464 C4.79907711,6.08780793 4.86242327,6.0310387 4.90846173,5.95488485 C4.9545002,5.878731 4.97769251,5.78526946 4.97769251,5.67000023 C4.97769251,5.55473099 4.9545002,5.46092329 4.90846173,5.38719252 C4.86242327,5.3131156 4.80011558,5.25669252 4.72153865,5.2148079 Z"
                      id="XMLID_2827_"
                      fill="#0063E8"
                      fillRule="nonzero"
                    ></path>
                    <path
                      d="M9.72346192,7.721308 C9.87334655,7.61053876 9.99346194,7.46273107 10.0834619,7.27823106 C10.1734619,7.09373105 10.2184619,6.8652695 10.2184619,6.59284642 C10.2184619,6.31592333 10.1734619,6.08642332 10.0834619,5.90400023 C9.99346194,5.72157715 9.87334655,5.57619253 9.72346192,5.46784637 C9.57323115,5.35950021 9.4025773,5.2951156 9.21115421,5.24873098 C9.01973113,5.20234636 8.82207727,5.1923079 8.61923111,5.1923079 L7.96153878,5.1923079 L7.96153878,7.96153878 L8.5915388,7.96153878 C8.80373112,7.96153878 9.0079619,7.97296186 9.20423113,7.92450031 C9.40015422,7.87603877 9.57323115,7.83173108 9.72346192,7.721308 Z"
                      id="XMLID_2828_"
                      fill="#0063E8"
                      fillRule="nonzero"
                    ></path>
                    <path
                      d="M28.7844242,8.09169263 L20.9582316,0.5784231 C20.5695008,0.205615393 20.0585777,0 19.5199623,0 L7.26923106,0 C5.85276946,0 4.63396172,0.856038496 4.09880786,2.07692316 L2.07692316,2.07692316 C0.931500037,2.07692316 0,3.0084232 0,4.15384632 L0,9 C0,10.1454235 0.931500037,11.0769235 2.07692316,11.0769235 L15.9230776,11.0769235 C17.0685007,11.0769235 18,10.1454235 18,9 L18,4.15384632 C18,3.0084232 17.0685007,2.07692316 15.9230776,2.07692316 L5.72538484,2.07692316 C6.10580793,1.65323083 6.65584642,1.38461544 7.26923106,1.38461544 L19.3846162,1.38461544 L19.3846162,6.23076948 C19.3846162,8.13946186 20.9374624,9.69230808 22.8461548,9.69230808 L28.0384627,9.69230808 L28.0384627,25.6153856 C28.0384627,26.7608088 27.1069626,27.6923088 25.9615395,27.6923088 L7.26923106,27.6923088 C6.12380794,27.6923088 5.1923079,26.7608088 5.1923079,25.6153856 L5.1923079,12.1153851 L3.80769246,12.1153851 L3.80769246,25.6153856 C3.80769246,27.524078 5.36053867,29.0769242 7.26923106,29.0769242 L25.9615395,29.0769242 C27.8702319,29.0769242 29.4230781,27.524078 29.4230781,25.6153856 L29.4230781,9.59019269 C29.4230781,9.02769267 29.1904627,8.48146188 28.7844242,8.09169263 Z M12.1153851,4.15384632 L15.5769237,4.15384632 L15.5769237,5.1923079 L13.5000005,5.1923079 L13.5000005,6.23076948 L15.2307698,6.23076948 L15.2307698,7.26923106 L13.5000005,7.26923106 L13.5000005,9.00000036 L12.1153851,9.00000036 L12.1153851,4.15384632 Z M6.9230772,4.15384632 L8.64692342,4.15384632 C8.99307728,4.15384632 9.33438499,4.19538478 9.67153885,4.27603863 C10.0083466,4.35669248 10.3084619,4.49100018 10.5715389,4.67792326 C10.8346158,4.86484635 11.0468081,5.11546174 11.208462,5.42942329 C11.3701158,5.74338484 11.4507697,6.13107717 11.4507697,6.59250026 C11.4507697,7.02173105 11.3711543,7.39211568 11.2119235,7.70365415 C11.0526927,8.01519263 10.8425774,8.27134648 10.5819235,8.47211572 C10.3212696,8.67288496 10.0266927,8.79196189 9.69923115,8.88646189 C9.37142345,8.98130805 9.03911574,9.00000036 8.70230804,9.00000036 L6.9230772,9.00000036 L6.9230772,4.15384632 Z M6.01269255,4.9551925 C6.1120387,5.14696174 6.16153871,5.38338483 6.16153871,5.66480792 C6.16153871,5.95107716 6.10823101,6.19200025 6.00230793,6.38826948 C5.8960387,6.58453872 5.75307715,6.74238488 5.57307714,6.86250027 C5.39307714,6.98261566 5.18538482,7.10030797 4.9500002,7.15569259 C4.71461557,7.21142336 4.46988479,7.26923106 4.21615401,7.26923106 L3.4615386,7.26923106 L3.4615386,9.00000036 L2.42307702,9.00000036 L2.42307702,4.15384632 L4.24384632,4.15384632 C4.51142326,4.15384632 4.76203865,4.18153863 4.9950002,4.23450017 C5.22796175,4.28780786 5.43115406,4.37365402 5.60423099,4.49134633 C5.77730792,4.60903864 5.91334639,4.76376942 6.01269255,4.9551925 Z M22.8461548,8.30769264 C21.7007316,8.30769264 20.7692316,7.3761926 20.7692316,6.23076948 L20.7692316,2.31680778 L27.0100395,8.30769264 L22.8461548,8.30769264 Z"
                      id="XMLID_2832_"
                      fill="#0063E8"
                      fillRule="nonzero"
                    ></path>
                    <rect
                      id="XMLID_2369_"
                      fill="#0063E8"
                      fillRule="nonzero"
                      x="8.6538465"
                      y="14.5384621"
                      width="6.23076948"
                      height="1.38461544"
                    ></rect>
                    <rect
                      id="XMLID_2368_"
                      fill="#0063E8"
                      fillRule="nonzero"
                      x="8.6538465"
                      y="23.5384625"
                      width="15.9230776"
                      height="1.38461544"
                    ></rect>
                    <rect
                      id="XMLID_2367_"
                      fill="#0063E8"
                      fillRule="nonzero"
                      x="17.307693"
                      y="20.4230777"
                      width="7.26923106"
                      height="1.38461544"
                    ></rect>
                    <rect
                      id="XMLID_2366_"
                      fill="#0063E8"
                      fillRule="nonzero"
                      x="17.307693"
                      y="17.6538469"
                      width="2.76923088"
                      height="1.38461544"
                    ></rect>
                    <rect
                      id="XMLID_2365_"
                      fill="#0063E8"
                      fillRule="nonzero"
                      x="17.307693"
                      y="14.5384621"
                      width="7.26923106"
                      height="1.38461544"
                    ></rect>
                    <rect
                      id="XMLID_2364_"
                      fill="#0063E8"
                      fillRule="nonzero"
                      x="21.4615393"
                      y="17.6538469"
                      width="3.11538474"
                      height="1.38461544"
                    ></rect>
                    <path
                      d="M15.9230776,21.8076932 L8.6538465,21.8076932 L8.6538465,14.5384621 L15.9230776,14.5384621 L15.9230776,21.8076932 Z M10.0384619,20.4230776 L14.5384619,20.4230776 L14.5384619,15.9230776 L10.0384619,15.9230776 L10.0384619,20.4230776 Z"
                      id="XMLID_2361_"
                      fill="#0063E8"
                      fillRule="nonzero"
                    ></path>
                  </g>
                </g>
              </g>
            </svg>
          );
        } else if (item.type.includes("image")) {
          mediaIcon = (
            <svg
              width="28px"
              height="28px"
              viewBox="0 0 28 28"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              xlink="http://www.w3.org/1999/xlink"
            >
              <title>image</title>
              <g
                id="Page-1"
                stroke="none"
                strokeWidth="1"
                fill="none"
                fillRule="evenodd"
              >
                <g
                  id="Artboard"
                  transform="translate(-272.000000, -204.000000)"
                  fill="#0063E8"
                  fillRule="nonzero"
                >
                  <g id="image" transform="translate(272.000000, 204.000000)">
                    <path
                      d="M25.375,0 L2.625,0 C1.17523437,0 0,1.17523437 0,2.625 L0,25.375 C0,26.8247656 1.17523437,28 2.625,28 L25.375,28 C26.8247656,28 28,26.8247656 28,25.375 L28,2.625 C28,1.17523437 26.8247656,0 25.375,0 Z M26.25,25.375 C26.25,25.8582734 25.8582734,26.25 25.375,26.25 L2.625,26.25 C2.14172656,26.25 1.75,25.8582734 1.75,25.375 L1.75,2.625 C1.75,2.14172656 2.14172656,1.75 2.625,1.75 L25.375,1.75 C25.8582734,1.75 26.25,2.14172656 26.25,2.625 L26.25,25.375 Z"
                      id="Shape"
                    ></path>
                    <path
                      d="M18.99625,15.12875 C18.6549453,14.7894687 18.1038047,14.7894687 17.7625,15.12875 L15.75,17.14125 L11.99625,13.3875 C11.6549453,13.0482188 11.1038047,13.0482188 10.7625,13.3875 L4.6375,19.5125 C4.29920313,19.8575781 4.30461719,20.4115625 4.64969531,20.7498594 C4.81020313,20.90725 5.02517969,20.9968281 5.25,21.0000149 L22.75,21.0000149 C23.2332187,21.0027891 23.6272422,20.6133594 23.6301008,20.1300859 C23.6314531,19.8949844 23.5381563,19.6692891 23.37125,19.50375 L18.99625,15.12875 Z"
                      id="Path"
                    ></path>
                    <circle
                      id="Oval"
                      cx="16.625"
                      cy="9.625"
                      r="2.625"
                    ></circle>
                  </g>
                </g>
              </g>
            </svg>
          );
        }

        return (
          <li
            key={index}
            onClick={() => this.showDescription(item)}
            className={this.state.selectContentID === item.id ? "active" : ""}
          >
            <div className="detail-icon-diagnosis">
              <span className="list-icon" style={style}>
                {mediaIcon}
                {/* <em className="material-icons" >
                                    {(item.type && item.type !== "text") ? (item.type.includes("video")) ? 'video_library' : item.type.includes("audio") ? 'audiotrack' : item.type.includes("pdf") ? <PDF /> : 'attachment' : 'textsms'}
                                </em> */}
              </span>
              <div
                className="label"
                style={item.isActive ? undefined : { width: 150 }}
              >
                <span className="detail-name">
                  {item && item.title ? item.title : ""}
                </span>
                <br />
                {/* <span className="date">{item.fileName ? item.fileName : ''}</span>{item.fileName ? <br /> : ''} */}
                <span className="date">
                  By {item.addedByName} on{" "}
                  {moment.unix(item.lastUpdate).format("MM/DD/YYYY HH:mm:ss")}
                </span>
                {item.isProviderViewed && item.isPatientViewed ? (
                  <img src="/assets/images/tic-blue.svg" alt="view" />
                ) : item.isPatientViewed || item.isProviderViewed ? (
                  <img src="/assets/images/tic-mix.svg" alt="one viewed" />
                ) : (
                      <img src="/assets/images/tic-grey.svg" alt="pending" />
                    )}
              </div>
            </div>
          </li>
        );
      })
      : !isloading && !contentList.length && (
        <h2 className="no-result">
          {i18n.chapter && i18n.chapter.noitemsfound}
        </h2>
      );
  }

  closeNewModel = (id) => {
    this.setState({
      MRNNumber: "",
      encounterID: ""
    })
    document.getElementById(id).click();
  };



  handleMRNChange = (e) => {
    this.setState({
      MRNNumber: e.target.value
    })
  }

  handleEncounterChange = (e) => {
    this.setState({
      encounterID: e.target.value
    })
  }

  render() {
    const { isloading } = this.state;

    return (
      <>
        <div className="sidebar-fixed-search sidebar-fixed-date chapter-header content-list">
          <div id="cahpterDetail" className="chapter-detail">
            {isloading ? (
              <div
                id="cahpter"
                className="sidebar-inner chapter-wrapper chapter-header content-list"
              >
                <div className="chapter-template">
                  <LoadingContent />
                </div>
              </div>
            ) : (
                <>
                  <ul className="chapter-detail-list" style={{ height: "100%" }}>
                    {this.renderChappters()}
                  </ul>
                </>
              )}
          </div>
        </div>
      </>
    );
  }
}

export default MediaList;
